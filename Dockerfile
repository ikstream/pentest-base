# TODO create User
# TODO: add zsh config and dependencies to make  it fully usable
FROM docker.io/blackarchlinux/blackarch:base-devel

ARG USER='hacker'

COPY ./pkg-list.txt .
COPY ./passwd.txt .

ARG UID='1000'
RUN pacman -Syu --noconfirm - < pkg-list.txt &&\
    useradd -m -G wheel,audio --uid $UID $USER && \
    sed -i 's/^# %wheel ALL=(ALL) ALL/%wheel ALL=(ALL) ALL/' /etc/sudoers && \
    echo "$USER:$(cat passwd.txt)" | chpasswd

WORKDIR /home/$USER
USER $USER
